<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Declare (amqp-client-async.Amqp_client_async__Spec.Queue.Declare)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../index.html">amqp-client-async</a> &#x00BB; <a href="../../index.html">Amqp_client_async__Spec</a> &#x00BB; <a href="../index.html">Queue</a> &#x00BB; Declare</nav><h1>Module <code>Queue.Declare</code></h1><p>This method creates or checks a queue. When creating a new queue the client can specify various properties that control the durability of the queue and its contents, and the level of sharing for the queue.</p></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code><code> = </code><code>{</code><table class="record"><tr id="type-t.queue" class="anchored"><td class="def field"><a href="#type-t.queue" class="anchor"></a><code>queue : <a href="../../index.html#type-queue_name">queue_name</a>;</code></td></tr><tr id="type-t.passive" class="anchored"><td class="def field"><a href="#type-t.passive" class="anchor"></a><code>passive : <a href="../../../../amqp-client/Amqp_client_lib/Types/index.html#type-bit">Amqp_client_lib.Types.bit</a>;</code></td><td class="doc"><p>If set, the server will reply with Declare-Ok if the queue already exists with the same name, and raise an error if not. The client can use this to check whether a queue exists without modifying the server state. When set, all other method fields except name and no-wait are ignored. A declare with both passive and no-wait has no effect. Arguments are compared for semantic equivalence.</p></td></tr><tr id="type-t.durable" class="anchored"><td class="def field"><a href="#type-t.durable" class="anchor"></a><code>durable : <a href="../../../../amqp-client/Amqp_client_lib/Types/index.html#type-bit">Amqp_client_lib.Types.bit</a>;</code></td><td class="doc"><p>If set when creating a new queue, the queue will be marked as durable. Durable queues remain active when a server restarts. Non-durable queues (transient queues) are purged if/when a server restarts. Note that durable queues do not necessarily hold persistent messages, although it does not make sense to send persistent messages to a transient queue.</p></td></tr><tr id="type-t.exclusive" class="anchored"><td class="def field"><a href="#type-t.exclusive" class="anchor"></a><code>exclusive : <a href="../../../../amqp-client/Amqp_client_lib/Types/index.html#type-bit">Amqp_client_lib.Types.bit</a>;</code></td><td class="doc"><p>Exclusive queues may only be accessed by the current connection, and are deleted when that connection closes. Passive declaration of an exclusive queue by other connections are not allowed.</p></td></tr><tr id="type-t.auto_delete" class="anchored"><td class="def field"><a href="#type-t.auto_delete" class="anchor"></a><code>auto_delete : <a href="../../../../amqp-client/Amqp_client_lib/Types/index.html#type-bit">Amqp_client_lib.Types.bit</a>;</code></td><td class="doc"><p>If set, the queue is deleted when all consumers have finished using it. The last consumer can be cancelled either explicitly or because its channel is closed. If there was no consumer ever on the queue, it won't be deleted. Applications can explicitly delete auto-delete queues using the Delete method as normal.</p></td></tr><tr id="type-t.no_wait" class="anchored"><td class="def field"><a href="#type-t.no_wait" class="anchor"></a><code>no_wait : <a href="../../index.html#type-no_wait">no_wait</a>;</code></td></tr><tr id="type-t.arguments" class="anchored"><td class="def field"><a href="#type-t.arguments" class="anchor"></a><code>arguments : <a href="../../../../amqp-client/Amqp_client_lib/Types/index.html#type-table">Amqp_client_lib.Types.table</a>;</code></td><td class="doc"><p>A set of arguments for the declaration. The syntax and semantics of these arguments depends on the server implementation.</p></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-init"><a href="#val-init" class="anchor"></a><code><span class="keyword">val</span> init : <span>queue:<span class="type-var">'a</span></span> <span>&#45;&gt;</span> <span>passive:<a href="../../index.html#type-queue_name">queue_name</a></span> <span>&#45;&gt;</span> <span>durable:<a href="../../../../amqp-client/Amqp_client_lib/Types/index.html#type-bit">Amqp_client_lib.Types.bit</a></span> <span>&#45;&gt;</span> <span>exclusive:<a href="../../../../amqp-client/Amqp_client_lib/Types/index.html#type-bit">Amqp_client_lib.Types.bit</a></span> <span>&#45;&gt;</span> <span>auto_delete:<a href="../../../../amqp-client/Amqp_client_lib/Types/index.html#type-bit">Amqp_client_lib.Types.bit</a></span> <span>&#45;&gt;</span> <span>no_wait:<a href="../../../../amqp-client/Amqp_client_lib/Types/index.html#type-bit">Amqp_client_lib.Types.bit</a></span> <span>&#45;&gt;</span> <span>arguments:<a href="../../index.html#type-no_wait">no_wait</a></span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="../../../../amqp-client/Amqp_client_lib/Types/index.html#type-table">Amqp_client_lib.Types.table</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-request"><a href="#val-request" class="anchor"></a><code><span class="keyword">val</span> request : <span>(<a href="../../../Amqp_client_async/Framing/index.html#type-t">Amqp_client_async.Framing.t</a> * <a href="../../../Amqp_client_async/Framing/index.html#type-channel_no">Amqp_client_async.Framing.channel_no</a>)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="../Declare_ok/index.html#type-t">Declare_ok.t</a> <a href="../../../Amqp_client_async/Thread/Deferred/index.html#type-t">Amqp_client_async.Thread.Deferred.t</a></span></code></dt></dl></div></body></html>